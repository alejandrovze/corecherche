<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Bokeh Plot</title>
<style>
      html, body {
        box-sizing: border-box;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.0.3.min.js"></script>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-widgets-3.0.3.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="45fb01c4-88a3-4ad4-9a09-e6f47ff6c4d5" data-root-id="p1054" style="display: contents;"></div>
  
    <script type="application/json" id="p1280">
      {"6b2a98c0-314f-49d4-ab90-944acbe3e9dd":{"version":"3.0.3","title":"Bokeh Application","defs":[],"roots":[{"type":"object","name":"Row","id":"p1054","attributes":{"children":[{"type":"object","name":"Figure","id":"p1007","attributes":{"js_event_callbacks":{"type":"map","entries":[["mousemove",[{"type":"object","name":"CustomJS","id":"p1074","attributes":{"args":{"type":"map","entries":[["div",{"type":"object","name":"Div","id":"p1051","attributes":{"width":400,"height":750,"height_policy":"fixed"}}]]},"code":"\n        const attrs = ['x', 'y', 'sx', 'sy'];\n        const args = [];\n        for (let i = 0; i&lt;attrs.length; i++) {\n            args.push(attrs[i] + '=' + Number(cb_obj[attrs[i]]).toFixed(2));\n        }\n        const line = \"&lt;span style='float:left;clear:left;font_size=13px'&gt;&lt;b&gt;\" + cb_obj.event_name + \"&lt;/b&gt;(\" + args.join(\", \") + \")&lt;/span&gt;\\n\";\n        const text = div.text.concat(line);\n        const lines = text.split(\"\\n\")\n        if (lines.length &gt; 35)\n            lines.shift();\n        div.text = lines.join(\"\\n\");\n    "}},{"type":"object","name":"CustomJS","id":"p1075","attributes":{"args":{"type":"map","entries":[["circle",{"type":"object","name":"ColumnDataSource","id":"p1001","attributes":{"selected":{"type":"object","name":"Selection","id":"p1002","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1003"},"data":{"type":"map","entries":[["x",{"type":"ndarray","array":[0.709750066587007,0.707780060568376,0.186541287306509,0.186335375744221,0.357526026567765,0.355954677788777,0.355574305058507,0.355034428928888,0.354624428057076,0.54873837284875],"shape":[10],"dtype":"object","order":"little"}],["y",{"type":"ndarray","array":[0.4346375637,0.707780060568376,0.186541287306509,0.72207783059142,0.357526026567765,0.73501901065163,0.355574305058507,0.355034428928888,0.154151565452,0.54873837284875],"shape":[10],"dtype":"object","order":"little"}],["color",["red","red","red","red","red","red","red","red","red","red"]],["state",["False","False","False","False","False","False","False","False","False","False"]],["nameSound",{"type":"ndarray","array":["n_Vc-nonvib-C6-ff.wav","n_Hp-ord-C5-ff.wav","n_BTb-ord-C4-pp.wav","n_ClBb-ord-C4-pp.wav","n_Cb-pizz_lv-C3-pp.wav","n_Hn-ord-C4-mf.wav","n_ASax-mul-E4+_C#5_A5+-mf.wav","n_Fl-aeolian+ord-C4-pp.wav","n_BTb-ord-C1-mf.wav","n_TpC-ord-C5-pp.wav"],"shape":[10],"dtype":"object","order":"little"}]]}}}],["segment",{"type":"object","name":"ColumnDataSource","id":"p1004","attributes":{"selected":{"type":"object","name":"Selection","id":"p1005","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1006"},"data":{"type":"map","entries":[["x0",[]],["y0",[]],["x1",[]],["y1",[]]]}}}],["div",{"id":"p1051"}],["varSong",10],["source2",{"id":"p1001"}],["len",{"type":"object","name":"Slider","id":"p1050","attributes":{"title":"Max duration (in sec)","start":0,"end":10,"value":1,"step":0.1}}]]},"code":"\n\n\n\n\nconst attrs = ['x', 'y', 'sx', 'sy'];\nconst data = {'x0': [], 'y0': [], 'x1': [], 'y1': []};\n\nconst x_cursor = Number(cb_obj[attrs[0]]).toFixed(2);\nconst y_cursor = Number(cb_obj[attrs[1]]).toFixed(2);\n\nvar dataCercle = source2.data;\n\nvar localX = 0;\nvar localY = 0;\nvar localMini = Number.MAX_SAFE_INTEGER;\n\nvar finalX = 0;\nvar finalY = 0;\nvar audioID = Number.MAX_SAFE_INTEGER;\n\nconst lenValue = len.value;\n    \nfor (let i = 0; i &lt; circle.data.x.length; i++) {\n    localX = circle.data.x[i]\n    localY = circle.data.y[i]\n    \n    var localMiniBis = Math.sqrt( Math.pow((x_cursor-localX), 2) + Math.pow((y_cursor-localY), 2) );\n    \n    if (localMiniBis &lt; localMini){\n        audioID = i;\n        localMini = localMiniBis;\n        finalX = localX;\n        finalY = localY;\n        \n        dataCercle.color[i]='yellow' \n        var el = Array.from(Array(circle.data.x.length).keys());\n        delete el[i];\n        for (const element of el) {\n            dataCercle.color[element]='red';          \n            }\n        }    \n    }\n \nif (dataCercle.state[audioID] == \"False\" &amp;&amp; dataCercle.color[audioID]=='yellow'){\n    dataCercle.state[audioID] = \"True\";\n    const player = new Audio('data/'+ dataCercle.nameSound[audioID] );\n    player.play();\n\n    setTimeout(function(){\n        player.pause();\n        player.currentTime = 0;\n    }, lenValue*1000);\n\n    }\nvar el = Array.from(Array(circle.data.x.length).keys());\ndelete el[audioID];\nfor (const element of el) {\n    dataCercle.state[element]=\"False\";          \n    }\ndata['x0'].push(x_cursor);\ndata['y0'].push(y_cursor);\ndata['x1'].push(finalX);\ndata['y1'].push(finalY);\n\nvarSong = audioID;\nsource2.change.emit();\nconsole.log(lenValue);\nsegment.data = data;\n"}}]]]},"width":1050,"height":750,"x_range":{"type":"object","name":"DataRange1d","id":"p1008"},"y_range":{"type":"object","name":"DataRange1d","id":"p1009"},"x_scale":{"type":"object","name":"LinearScale","id":"p1021"},"y_scale":{"type":"object","name":"LinearScale","id":"p1023"},"title":{"type":"object","name":"Title","id":"p1010","attributes":{"text":"PyTart (beta)","text_color":"#000000","text_font":"Helvetica","text_font_size":"1.15em"}},"outline_line_color":"yellow","outline_line_alpha":0.25,"outline_line_width":7,"renderers":[{"type":"object","name":"GlyphRenderer","id":"p1061","attributes":{"data_source":{"id":"p1004"},"view":{"type":"object","name":"CDSView","id":"p1062","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1063"}}},"glyph":{"type":"object","name":"Segment","id":"p1058","attributes":{"x0":{"type":"field","field":"x0"},"y0":{"type":"field","field":"y0"},"x1":{"type":"field","field":"x1"},"y1":{"type":"field","field":"y1"},"line_color":{"type":"value","value":"orange"},"line_alpha":{"type":"value","value":0.6},"line_width":{"type":"value","value":2}}},"nonselection_glyph":{"type":"object","name":"Segment","id":"p1059","attributes":{"x0":{"type":"field","field":"x0"},"y0":{"type":"field","field":"y0"},"x1":{"type":"field","field":"x1"},"y1":{"type":"field","field":"y1"},"line_color":{"type":"value","value":"orange"},"line_alpha":{"type":"value","value":0.1},"line_width":{"type":"value","value":2}}},"muted_glyph":{"type":"object","name":"Segment","id":"p1060","attributes":{"x0":{"type":"field","field":"x0"},"y0":{"type":"field","field":"y0"},"x1":{"type":"field","field":"x1"},"y1":{"type":"field","field":"y1"},"line_color":{"type":"value","value":"orange"},"line_alpha":{"type":"value","value":0.2},"line_width":{"type":"value","value":2}}}}},{"type":"object","name":"GlyphRenderer","id":"p1071","attributes":{"data_source":{"id":"p1001"},"view":{"type":"object","name":"CDSView","id":"p1072","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1073"}}},"glyph":{"type":"object","name":"Circle","id":"p1067","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":30},"line_color":{"type":"value","value":"#1f77b4"},"fill_color":{"type":"field","field":"color"}}},"nonselection_glyph":{"type":"object","name":"Circle","id":"p1068","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":30},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.1},"fill_color":{"type":"field","field":"color"},"fill_alpha":{"type":"value","value":0.1},"hatch_alpha":{"type":"value","value":0.1}}},"hover_glyph":{"type":"object","name":"Circle","id":"p1069","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":30},"line_color":{"type":"value","value":"red"},"fill_color":{"type":"value","value":"red"},"hatch_color":{"type":"value","value":"red"}}},"muted_glyph":{"type":"object","name":"Circle","id":"p1070","attributes":{"x":{"type":"field","field":"x"},"y":{"type":"field","field":"y"},"size":{"type":"value","value":30},"line_color":{"type":"value","value":"#1f77b4"},"line_alpha":{"type":"value","value":0.2},"fill_color":{"type":"field","field":"color"},"fill_alpha":{"type":"value","value":0.2},"hatch_alpha":{"type":"value","value":0.2}}}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1014","attributes":{"tools":[{"type":"object","name":"PanTool","id":"p1039"},{"type":"object","name":"WheelZoomTool","id":"p1040"},{"type":"object","name":"ZoomInTool","id":"p1041"},{"type":"object","name":"ZoomOutTool","id":"p1042"},{"type":"object","name":"ResetTool","id":"p1043"}]}},"left":[{"type":"object","name":"LinearAxis","id":"p1032","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1033","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1035"},"axis_label_standoff":10,"axis_label_text_color":"#000000","axis_label_text_font":"Helvetica","axis_label_text_font_size":"1.25em","axis_label_text_font_style":"normal","major_label_policy":{"type":"object","name":"AllLabels","id":"p1034"},"major_label_text_color":"#000000","major_label_text_font":"Helvetica","major_label_text_font_size":"1.025em","axis_line_color":"#000000","axis_line_alpha":0,"major_tick_line_color":"#000000","major_tick_line_alpha":0,"minor_tick_line_color":"#000000","minor_tick_line_alpha":0}}],"below":[{"type":"object","name":"LinearAxis","id":"p1025","attributes":{"ticker":{"type":"object","name":"BasicTicker","id":"p1026","attributes":{"mantissas":[1,2,5]}},"formatter":{"type":"object","name":"BasicTickFormatter","id":"p1028"},"axis_label_standoff":10,"axis_label_text_color":"#000000","axis_label_text_font":"Helvetica","axis_label_text_font_size":"1.25em","axis_label_text_font_style":"normal","major_label_policy":{"type":"object","name":"AllLabels","id":"p1027"},"major_label_text_color":"#000000","major_label_text_font":"Helvetica","major_label_text_font_size":"1.025em","axis_line_color":"#000000","axis_line_alpha":0,"major_tick_line_color":"#000000","major_tick_line_alpha":0,"minor_tick_line_color":"#000000","minor_tick_line_alpha":0}}],"center":[{"type":"object","name":"Grid","id":"p1031","attributes":{"axis":{"id":"p1025"},"grid_line_color":"#E0E0E0","grid_line_alpha":0.25}},{"type":"object","name":"Grid","id":"p1038","attributes":{"dimension":1,"axis":{"id":"p1032"},"grid_line_color":"#E0E0E0","grid_line_alpha":0.25}}],"background_fill_color":"#000000","border_fill_color":"#FFFFFF"}},{"type":"object","name":"Column","id":"p1053","attributes":{"children":[{"id":"p1050"}]}}]}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('p1280').textContent;
              const render_items = [{"docid":"6b2a98c0-314f-49d4-ab90-944acbe3e9dd","roots":{"p1054":"45fb01c4-88a3-4ad4-9a09-e6f47ff6c4d5"},"root_ids":["p1054"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>